<html>
   <erl>
      % chart api docs: https://code.google.com/p/yahoo-finance-managed/wiki/miscapiImageDownload
      lineChart(Symbol, Time, Size, Type) -> lists:concat(["http://chart.finance.yahoo.com/z?l=on&t=", Time, "&z=", Size, "&q=", Type, "&a=v&s=", Symbol]).
      fourCharts(Symbol) -> [
            {'div', [{style, "border-bottom: 1px solid #eeeeee; padding-top:5px; width:100%;"}], [
            {a, [{href, lists:concat(["http://finviz.com/quote.ashx?t=", Symbol])}, {target, "_blank"}], {img, [{src, lineChart(Symbol,  "5y", "s", "l")}]}},
            {a, [{href, lists:concat(["http://www.nasdaq.com/symbol/", Symbol, "/analyst-research"])}, {target, "_blank"}], {img, [{src, lineChart(Symbol,  "6m", "s", "l")}]}},
            % {img, [{src, lineChart(Symbol, "6m", "s", "l")}]},
            {img, [{src, lineChart(Symbol, "12d", "s", "l")}]},
            {img, [{src, lineChart(Symbol,  "1d", "s", "l")}]},
            {a, [{href, lists:concat(["http://www.nasdaq.com/symbol/", Symbol, "/recommendations"])}, {target, "_blank"}], {img, [{src, lists:concat(["http://www.nasdaq.com/charts/", Symbol, "_smallcnb.jpeg"])}]}}
            ]}
         ].
      out(Arg) ->
        % io:write(queryvar(Arg, "symbol")),
        % io:write(yaws_api:parse_query(Arg)),
        % {Token,Value} = yaws_api:parse_query(Arg),
        {ok, Symbol} = queryvar(Arg, "symbol"),
        Stocks = string:tokens(Symbol, ","),
        {ehtml, [ fourCharts(S) || S <- Stocks]}.
   </erl>
</html>